import 'dart:io';
import 'dart:core';
import 'package:http/http.dart' as http;
import 'package:html/parser.dart';

Future getSchedule() {
  var url = 'https://art-yeshiva.org.il/Schedule.aspx';
  var client = http.Client();
  var request = http.Request('POST', Uri.parse(url));
  request.headers[HttpHeaders.acceptHeader] =
      'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9';
  request.headers[HttpHeaders.acceptLanguageHeader] = 'accept-language';
  request.headers[HttpHeaders.cacheControlHeader] = 'max-age=0';
  request.headers[HttpHeaders.contentTypeHeader] =
      'application/x-www-form-urlencoded';
  var body =
      '__EVENTTARGET=FilterMain%24DropDownList_Class&__EVENTARGUMENT=&__LASTFOCUS=&__VIEWSTATE=edPzHj5VZh9u%2BoPBcCN5uWU6VQHPYlZNt8BuCVoEOM%2F5NFuHdNzHlW4wLZSkjGRvaiJBl0LP8RSBer%2Bi7J9P2BfN7wXuL17R3bFg2GSKdD3AqUhqwwdGESSeUxYNjGjjhvye2f1fXkRrKyarra5nrzTqRAmiemu7ipOcxZlmn4szFJ8SdXZJ3brmmRb6%2Bmm9V15KRr%2FPOHOsh%2Bin0dFZAH4IM53xb1SLrOFPifXiSGFDH%2BzFPhZEykMQc6q4xuiho%2BpwCG98ub%2BWN54k65jY4kXBxAq%2FaOTvcm61p0mYnge5BG5LnVc40ytRZa1aE%2Feed18PnjsYepF1v4IgROyQYA%2BWveJdsN5x9dZIzfZwiDa%2BM5mVz61tuecB0ySORb9%2FL1yNgcc3Mwl%2Fh7s8qDxReWywndXjNz3KgMclMj5BWmsDBCVt2FiXDX0Kkwv4ttUW755KHH%2B3qGALSrsXC%2BHqirYMw6iu%2B2CtAjcsn4uaNJ3QvMAjjKqb6l6fERYCv%2FiuRv4Yt1wGJ61BuZqbN2KmKNXOvtEr%2FnOdstkWPGakD%2F2ZzY6BuyuAqGMx1lI8wvwnvIPwVczyVmy3ShNuKPhVABTmMMK4VX4mb8OCevjIl1R87ooLQy2fn7GzjdXHc1PMChoMKQYFqJoeYedTiMBXD2PBYS%2BFmbjY5yd%2Fj6%2FchFY1PRGaoQ3Yn3oXDaGq0ddvvSKXWGW%2BhKYxq4u%2B6fs2OXfJ4ikbjQV6fNwOmzIC%2BcWUgzg5kfnifNp2OYCCM6ufENh0obPbiiVjT04hvG0b2S8%2Bp5FgkRtLy0JX%2B92l9mOq6Krg1bGMjphdQ0V%2BmCWkpsh0eSjwzkwsIwXEgLiXcuRnj1ON5%2BMbtcukScY1t1qr2ZlxopU2ptPQRpO8o8Tnfqdda2n6hsU%2BIXuWvZ%2Fv75VRzugUqL5BFJipfEtDbk7FITUP7jDiR%2FRVB7M4k7oU16XGLr3miXeWh9adGKz5bB94KXCaWzU8Nc%2FkNgydg4PxdmRVpyjl3DdorSdc4BJ5i1KF7id0ZPINZJv1ypAnLgxrM0T%2BxVppFhyibWZDuhBxKutgQG1bnUf2lgD2KpN6KdY7LOxne7raGH9ly42do0AYFwl0l9%2BykehFvZcG9JSvGDxTK3UBs3oHVLsIQwcAG6tG%2Ba0EcUBXsUyRPINHE3MJH1aNk8Y3PR%2FgI0BNYv8XwYCocGEKXJhKQ%2FkMllvVhGtu7exAVspQtykV7lNRZAh5IHU6wTKA5%2BU9Gu31UVYLc3PAOdEv%2BnWIxMbpBOZwX73drRgnqp433SG479UAOgpQ5wlS2Vm7c1zydnZFc9mRQ7DbpZG4%2B%2BrJdIfFadejkNleIQEUSXU61qyvPrvrFnoYywaPMT7O4%2Fcm%2F6E2jNSMx4YC%2FgCppC7Du8aQ6apjFTGU8UhXd05S52vLKXo4OpxAOT%2Fm9G7pngAfWvYkpS%2BzhlntvHJBncxB%2FODg526wVXZNxszDUNixZVhYrCq4NCSZEwgH37UrRzVN3n4ZgV%2FNPFuivAOe8o7aDCpSz98MGh20P4tpTRIWK1z8E9B53IdIXctfEBjmsmfFLgKeidbIpj%2F3MCT2%2Fho2OmjHkM0KvmtOG2p0g%2BysOFlhJU3a4od6tenwMv7bIVNJFwvPZN7esPa0tMLaDAQnFeZU5lMS%2F4S6Bm3erkuxdu%2B37d8ALhBn6VVb0CzgsZyTZRgq6lVU7j4QiNlqchabw3NNaVrldTHk1d%2FKEW2EB2%2Fz76RU9%2Fnh3pEDsJ7FwmwXUN4zPKrfxcOxOKKhLgapzrGuw179bA%2BGKx9Enk1UQn%2ByPozG3zhoSsYrTextBBFojQLk9fe5qcM2izaV6bU7jnpticjbuWqjhGix8HoveU9djZHGxwHyaZnRYmvAVC5iA%2BmJEGAq5viH08aQRkj14lJmhshQ7n0%2FxNAuHRfVusDGKwCS7IPmIJoHhkcHxcqzmqX%2FNbFIjTEzNXFyjLZj3uoYkBa387uLbd90UoVwG3ak1dEpaXmCrGuwQgPb%2Ff7Wb98WsyyEglJNMInXQWMfyzO3wJbugQT0wNURLs8k5lQHLXr8XxVGu22W2KcZsct7SyuekuqIoqccEr3YS2PcKXx8n7aeED0PfQ3JAy3nAWGrKZxqkKAlYgsiD8%2Bq6xHbBg5xI99GE0EYdNSCBkJpeFnAXXbzWnIfyEXtbU4W1ONGemhCSSFEQooXBwa99lC0RiAzJBIXpIpdQM56LVhxbTnUHclYi369ZjtxbK77W8M6baL69P3FV6xKm9UwNSJIF8M%2BOOQ4i%2BYzPxESG%2F08tkQO7r%2B7lMHkEXsOQLOajmsGRMA90hYI8Whcj5yO6FkTtJ9wksS7UFC8O0h7Rcprc0IDV%2Falx%2BXIem4fZ44hKhrMsX4KMrPMGJnRa2Edr%2F%2BBoS7pTZLnWr4WIHoycx%2FCtPzn104cSxcLFUC%2Fy7czYuwGYWYDtjsNKIhlkWYxxOeSR3pmtsIDrV7d3d8EWB%2BvYBI97Qo%2BktUYY21xyOS%2BBMyfCtIMQGZMvfB1OkiBIIjmqcIwc5HOzeMZbjROKMnXIdu%2BGYcBdlM3bTJn%2BnURM6bW61gs6uImZUS7aAZiFWfSJEcW466Qg2T%2F4N2jvD7iKNY3O%2BNHE9TjCIjooZ%2B%2FaMmekty1HRyhrW7%2BWuKJz49cwbfvSyi62JT06RhW%2BIMxznl3W%2Fm3j17YeWYyIeOShorxRdTo6S3EbuChFBkcdWGRGcZ1Gb3n%2BPmKFHTm3FKM72pH%2FcviooxKZGw7fdwkcG1MPlbiiQTtY17yaCeaRkWgLz%2F4OvtzfXuAxdVUmeOXJlKLTvTKcW3KPy8omDJNcqzoob7GzzKzLbQBXA7%2FH2Kmb0vgI27YlpzoFWsa1d5%2FnzTmVMe%2F3jILNqcWAFN%2BahakdXRuK9gXXdoxk1xiqENdCu7jCIebzxOmHIbNX6CzyUZX4IXuuEzwcLrL8J0uoQock1MpFrVtsX0BmhIVXDKrNTnRuwDmcT7iCcnD0HDxQKBIlNzxLSbYGY763%2B4iXEokDsz8WyhuoxL8yprI7oTITVrdw9iMnxRYXpcrOHiup0NnYBY0mv6uIla3lo%2FHvsIrFioqre7JHiLDsEtjnhnkOqR1p4jTW6qLRYlmWnPOxvKNeeJ986LTn%2BViGZvwZ2lKFT%2Bf2kSuqRS3wvN%2FwKxiZAeSUOAKYcpeRc8nlbz0HOVuvCPndlf%2FBawRqhciemNuCHH5Ji%2Bs23Gp%2F7BPLNxi1yUlkcQViPvSS0JRWjhGJFonzF9Pprz%2FHNhM%2F3ni94wHklNCAGCBSYYkrqQ%2FwgCG1npnAGRRbrZ8viiY%2Ftbga1v%2FVWwwDP7slmIFdETsUr%2BVCMYKajzYKm8R5BHbAPce7dc%2F1uw%2BRWPFWvObAtdR5wBsrTA42R8ZByqAdWSLUK%2B44J4y%2BerKPKqMzJLGRBg3CketswSEH0ZAcufx3KZWNibVReuWDkrxRhahmST7Lku6mf4SfmMo8TvB0w5FkEgsb7nIsP%2BmVUYbX%2FT1761pOzlfS7lcSdTLQVN35BRW8LmeSVD2pHN1P2BOOVIByWVlBY%2BVQeodYHIgHBS2AdD9V0mXdltxQPZ8bT32SM11u6pqEfUAWNSptAUuDw9wTg60NB4kZIUPBIwZ1Bu0oLA7YQQt8R4rJtwB1gI0HHckgWE3yAgQeapZcVN4bi5f6%2FFnATdU6lZZo3n24L0k12ZNHRQHdTLETJtzy5spryVu4zCBdjajmgr8sxvFZB570hr%2FZa4l7dPiBG5MQbs3%2F%2B%2BIa6PnVi2H3WTvHbLqBPdDvxmJYbfUS1I9ji2sGdY%2B%2BcvqGID60GZjPa%2BlUJY%2BNDpSGy6%2FQMOogfTdBtgg0PmyCarpt8dUpXUmMQXvCVPqOoXOuTzuYZUgB0wc8Z%2BsGvSSSunbjybk362niIiUB6zncGWLgfJAi%2BgKVsU%2BLD8VQCQ1RaBs6SToFgLDI0%2FlkxCeOp7Zzl4OD%2BlgHcqYhUgdBIiqqHA1%2F4Dbdx%2F5sDhGN1YxWrt6Wf3MYmq5zd1xfHrbAxK0QW6DQhqOEgRn7%2BhaTRdGbkvJ%2BJkOdVHewpzLVgWjoD%2BaWt%2F8LItZ%2F0Ula2zG35KI4oFdRlxqkOYcncjqWFrcBbfQu1HA2aH%2FXEmEbtxqc3JXPywCfOx67dUZjJMh4LAuKGMfi8UKzh5Jx2jtYQpCViZ%2BVmMRH10YOloju3SKDcYtI4ngioOckYYTXnw6yzLmK4aCmcqHt80%2B7bV0X1G4gNh4Gznj0CeEP616TrzGnMXC67fLzvkTbvvzPvFQSBa3JFJUece6yHTFC5WSnTH9OUqBcAD6ug77RuyU6vAclKKSqDhiJdqi2HtI8WcoL%2F29lM8XpHYkkFqXDEGFea0KMKJ1Oam14t5WVRdXxTVH8lOIdd%2FswH9xQeC50m88p9W5Ysfe3xUf%2F88VFluU3TCKLrZrVgs239kh%2Bn3Oq8SRc7H0ouh21D8XMIe4f9OJXEOrxc5mCE09Kl4F3x1ezBS8To%2BgQXkaCCClBsxVi4GW6eW8mmEgy5nl1w4bWoEQcF7modb0%2BnfXKlTpoWo0Xreg7Sg31NscdNgKQ4MYDP44kjbc3o90U%2BIDCiw2tsQTJVAcJ6%2FnHA%2BhpAQALfgIGVOsac93doUz5Kz6TWIxw6vXc0GHX83OJVXc%2FW9467%2B1JBPtl0zKdU6kBUxr%2BMkU1H%2F2xZMT4jn4FWsQfn9KNUqgS2kYbBA%2BLOS08yiKbuflJwnBm8%2Fb0zPWURpXkzu94%2BrZCg%2BiBjjZ1tWCWotffOc29Tps30gg3ic9ytJG%2BnPko5da0HaDedVv%2FL2nE8MXttyoPREcsmrbYybxCTDH3kCM0RBTEk9hTHRUW6UC2A4le4h9oNn0cbaKKYPLVhRHmpOdGIeK5UliRuUXuTDlsGLtK13o0WNlNtVkq5YshL7zUOzJCO54nS3vHun9dXiosnuBUrLwjIyJkK1Q%2BrImYTXNlaLszlbZ%2BozRH%2Fqx1zjdpZDu5qAOfa9jk8U2CO1vRB3Hyo3hyo0qFhar7PE%2Bpyc6akRXS8ueS34qeFbcsVv5OkrPnrqduskVhWaPRtbPe0qYdZVEyFCS4WwdmRNpKnmETn5D3OYXe3G9C0pW69lEwYsbndj0mXmFzfR5prClWhJBnJxFGdIAzNpZv3I3xhZdzU3gkz1TlgUWn9gKz%2F%2FpfiG8D%2BzURFvGDxebajCO2Q%2Bx5%2BcdFfpX2oYcyNq1TQ47e7mTWdr7OjTBmUyfkHKmpo2QNPDD3Pqlgr8zQlOyf440AEEtamYnFWXMmieVw3v4x0kvNT51jruBLz7moSEA3V8dyNhgg%2BLY64KrNybEtQoNf0fYmNh%2B8EmOc8hWJaULUmWsvGul02NGcpND7%2FDWdFrJsJzvDZ%2BhzVZuMysr3EQ6N9V25OexG71nK8phcnGP3IpHtkweR8ePhgc48sxnJaZZCtTYkjgynHj59ZvAAk96y2am1JPOfT7xgpxlzhS%2BS5cec5Sm5CZFJKirUNU4tCwAkBhpTdoGmR8EJyO7O2A6Lm17%2FUJBZbwsi8S%2BDQ4T0orwjV%2FNyxpjlPLsjXP5kbg6CBJMqhT9tUqx1od5BSp1i6gFYbCrxn%2Bw6%2BAU0OVHqUDam3xa%2FS2aN0IK5lvyJazLFMJTEBRFwikZVnqNAowoMleJw2hJ%2F9XGjz8iGRMsPrhyJGcOYm%2Bhjr95gS4Ji0gCrtSO2zSHbt8bB0drN623F3J6OmrICo2%2FClLl9cO2Bq4k2nMKCpeowLoNrCdzqaVl9eQ4FKnQIzxC1XWDO2QozlcmFf9Q%2B6JZOMag%2F2JiXpKybAKitEnokmVRT8c7T5%2FLNh5Kbv92WGL4p1ZmHJ59%2FltcSJr8%2ByRQKXce9tK12F3OxiXUZ1W2DpzQWc%2FF5rMqxQI%2BM4hIDkElnKLAPXTEjTBeuhzPA72hEpAKd6NcTsCZ851q%2FKzekBgz7Ni5qBseeSnoS7aPooJdf%2B0faNTfFxSxBLxSKkFGjmdkJO%2FkYhSBO7d4NR%2B7ESySTTwC4Xu8ytEJcueZ9xl3Uq2DvgSHAOYCbO2v6FtvBPwviYYw7d586OBMPM91JGRnjhTN9NYyUD%2BXBdXFvJbBiNCP3kCZtWv2zGZ1AJFV%2BQftMJNrImxAZOuImu%2FWA0DbIZQTvygGKUZVYnOA3kJnz9dUL5HMALuZFXdYyLJiOSMXrmIxGNnhIDRKYCOkgrMAq4DnSSihliVtxDdBwZqHvBrszzhHBGcei36Wt4frr15tRszjj%2FzDRxnmVuWbk40Rg4ThYB5j7VoomOWTO3ekEArvbQCea0DvI%2BJ%2BY%2F7Kwcn2y9f3wPqYjgLXRgoifJa2h3wiNImp7HhGqwLu71DGh7YNEfrYxSrfqIiEU6cNRSWOyiUVd6BiG7TWpNYbQ64owlRNzYSAHMnOfdDs6bkbDeycIz1fQIXX9NOawiFCkBpd22ASMt8a%2BBPcnMRGhiwg5e5bvBFdz%2BFblAaGkl14soDJHgaBxGy5XrajUU7Rd14Nvso%2Bd%2FPb48mnr9%2Fv%2Ba5QH%2FXfVhcHbB6c2KqZRZ9wv%2B3OdwVi0KkR6ahHs6%2FmZhH7K%2F18sqmF5gp%2BMg7A%2Bu4Ph7gF%2FQW%2Bz5k7baKhretrn5Slz4BBPNhDF9p7XG2LFOuhw1ufpM2gDbbTuFs35wsJFO2G7qIr73Vz8ASD7l5qZCM7YA0LVQeLsbzuKTtJNl7SCXwU1Rk5%2F0cjaNbCT%2F1uQxWi6k%2BqNtMrx7cJ0NA7nWrVAtVH3k%2BiClP2tzen%2BH70H%2BuAeqAcogqyL0%2FBTO2Kq2gjmLqSdFGrJ108p2xl98%2BT3WOH4tjde9O3BY5w8EaMCXVtoccCQuSYWIcLZxk8shnt5eZe9z%2Bk7URHkPvpN0%2BrukfMNItawVIXhxH1%2FKlVBaTuCDdwfaRCRVaiduDrSe5tHdL2Ft8Am4A2qnvtJYGWM73H%2FnGBnWy0Tr53UCS1p04vm%2FvEbZTW40MvA5RdlJyTbqTsUz6tT%2F9s9gmpVUPjI7X5kNTcTWxKB2WqL1Tt3uBOJv8rq9UKS3oOYpjKuKInoEyKwpwEar6REJm5TiVp2qyg4sXDELPqdGgrjsYHlJpCIO%2Bm%2BIV%2BeZBivM6L6ipsBKLswd89CILS9omHe5Rk0svwgoyyMiL2B%2Bkk4UWbIMY%2BM8TZYZ8S0rUqI3zMKTpoaQ3HCNR6iYx2KxBS0z73mvTh%2FV9tveAtITpNx7gMcmMyyCtQjGhAW0t0mJNydWPUcM8WNJmmZhiY8sqU0UGgRv7k9HfYL%2B9dJ7azJylfzIk6TaTJQ1Kxq8zFOhziRmIEZqnsNxO%2Bj%2BCkGByH%2FWXCaYAyiy2XdbSM7hL1YjOmmX1iVH1H6fjQigKU%2BAQN%2FuSUjOCzuneD2qEwsPszU4PS%2B6OgEpeKyZCPAYQZgsjAg4bBYxkW6T58%2BxiNPOM4zM%2BgxErJBK4lfo7hRMuG4%2F2dmfCeNud2KbruFlaWb1NLYY4iVam37%2FC3oFnXE4G1H%2BMBeTGm%2BuKXQTZGkGORyLciwEaeDxU9sTCmiB0SgtxEsXJGi%2F4lglzfydGqbuZ6fwV1m1YBZcS4jldAOnd9x0rLBiPMdNf7AdOu9IXvTwCtIsFNTCE5ylpUK2gOJFU8qhbzz%2FUCeTucO53K%2BOkj%2BM8Xcllmqv14iRjM%2BMBj03%2FLsUtEZEtX8HtyYloJTLLOyZj4E0EfM0IoR0R9Ugkwc8jNZTF5AkentUg4YbmaUka%2B4jmxUYlxpwq61M4SiBxMOggvYI3RFZqx%2FsE%2FLa6bOH%2Ft0vc36YzbyLsDZzM2SsRmGN98ZfXAaOFtwl%2FSJI6hsFxsx8P8vZ7TQL3ExlIq%2BVRhtuidvyBl7x8N7xcPp21wtxYgZMPHF3a08IR6U%2BKcNHedqtON5BbLjpqa53Qkfm8pnj5FUAzuq%2FTWGQiY2E%2BK%2Bz6ELh%2BHfDfrCSAlvXxBvUluY1ncPnOdAPV0AqWC4pRrZoaJZ%2BzG6qwqfu9amJoluFFlxKqpUY4Po8zHpOC5hA2yiV7QrVLYkcioSrCZ72JeDlyI5EGOTQLIj2%2B%2F91VdeCRQYStSOSB6%2Bi0peS03LkGNSvVJRo5eBWONnRpYlYKJ9Z7cEMuMLo6plcUANI%2FvvMZGNp0%2FHAq9nBMp2%2FQf6dyoxI4AP4F%2BNUHiJ7yRRGYLG%2B95qR8cfI7hweXsTwKJ1eJuIx4Nde8TBg5Ab4uCmyQn6BwRmA7YKZIopqrRdb10cqP8aDhuTE1gUuDdvq4I88ARySGGydpMIrzlbFOFaJhb0jNO%2BN2sLqo3u2nRIP6P5ugH5yhGRqNTYedrWgjhWfZw0TurePIwI%2BVDxlIBs2IU6oia14XfI5sr%2BePJOPZXD4Jy32cuIhWio6hYdUs49ruMpiq7C8Vh%2FVVZ4NVAlcD26qSX%2B2a%2FD2JYAFgyRvACP3aQaJru8w%3D%3D&__VIEWSTATEGENERATOR=8E87A3C4&__PREVIOUSPAGE=sTCNjXbYLmq3aW4OqbKpIRs563yxFIyPk9we0bKLx4Kpr7xOVCPgUxnYE059JMq62b2WdUuaEr3aQFaeZ-pePQ2&__EVENTVALIDATION=e2jvHsrg3JP67t9g40rtjEhwomeg7Pjk9UXWOyTvCMZa95e0rlfz%2BCkPkmVZZt7rNKdCPS8Uaq49CWL9g3kJIMgLElYdAJTZUDr843BUNoS4aTgg5%2FDwJ4zVlV3e7DAHq9T6oUzXP4Qdh7rGHAJt6vLWlqCO992w%2Bp4NmkIHJzHhEPMx2E5gIThQwkNR7hwFljspi8lERRFUzsPddxdXnX6fFMWk1fQzGPYuua6WDrHLTu3z9xNwt3Dm08nqQOlSjhX2n8KG5VvBAT3JYanUF0x3Lsxl78IIgDK%2FTaBzJd4XZ9JJGG1blsjFcFluyTxoJwu9noFl87e9KR9TuVjSELDEfbuh5UAVcT3ORjx2l%2BQYRfr83V5QRXAPVmAwELACj%2Bjl%2FvPHmFZ4WB0T3W9Rf45LXsy9%2B4SRwLxjYVpjgTjnzjKxGCFzlBepXAQE8S%2BpSH51QOeHWiuUTAhk1Wm0B4iXBDWpIlLLPYE%2FlzcEDByOsskF%2BZL49mffYN4NcqbYnGr8loSbeHF5Xw7tGv6lFBl5WDVRlvSft66tcC8nLPexPCjBZnkNRlCbCeAybb1OtLVxRB6HZK%2FxhCM55Dbp4W5UXfpiKwZjRzx3Uz7W%2BTyJ5hIgp6%2F9Ie0WqpLtFlPSOPO78HnFAzoU%2BsnALXU4APGg9EKg8mWvA%2Bwdxv3uxUfefXNeb8onBC0cQK9FAbd%2FhIbKl5e0aij6kJZ8mx%2Fozx2GHDidi1iwbctpY%2FcKULo%3D&FilterMain%24DropDownList_Class=1101&FilterMain%24DropDownList_Day=%D7%9B%D7%9C+%D7%94%D7%99%D7%9E%D7%99%D7%9D&FilterMain%24TextBox_FreeText=';
  request.body = body;

  return client
      .send(request)
      .then(
        (response) => response.stream.bytesToString().then(
          (value) {
            var doc = parse(value);
            var lesson_links = doc.querySelectorAll('td.TdWithBorderStyle a');
            for (var i = 0; i < lesson_links.length; i++) {
              print(i);
              print(lesson_links[i].innerHtml);
              print(lesson_links[i].attributes['href']);
            }
            // for (var lesson_link in lesson_links) {
            //   // print(lesson_link.innerHtml);
            //   print(lesson_link.attributes['href']);
            // }
            // print(value);
          },
        ),
      )
      .catchError((error) => print(error.toString()));
}
